<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>V-Pulsar的博客</title>
  <subtitle>道可道，非常道</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="/PulsarTao.github.io/"/>
  <updated>2017-01-11T08:13:44.384Z</updated>
  <id>/PulsarTao.github.io/</id>
  
  <author>
    <name>Pulsar</name>
    <email>2571440661@qq.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Wechat PHP Dev NO.2</title>
    <link href="/PulsarTao.github.io/2017/01/11/Wechat-PHP-Dev-NO-2/"/>
    <id>/PulsarTao.github.io/2017/01/11/Wechat-PHP-Dev-NO-2/</id>
    <published>2017-01-11T07:08:12.000Z</published>
    <updated>2017-01-11T08:13:44.384Z</updated>
    
    <content type="html"><![CDATA[<ol>
<li>接入文件，建立为Wechat.php（当此文件在框架中使用时，单独建立为一个Controller即可）.<br>首先我们需要宏定义一个TOKEN变量与微信接入的TOKEN一致  <figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">define</span></span>(<span class="string">'TOKEN'</span>,<span class="string">'YOUR_TOKEN'</span>);</div></pre></td></tr></table></figure>
</li>
</ol>
<p>宏定义TOKRN以后，调用官方给出的方法控制微信的消息、菜单接口<br>定义回调函数<br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//验证TOKEN后输出验证</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">valid</span><span class="params">()</span> </span>&#123;</div><div class="line">	$echoStr = $_GET [<span class="string">"echostr"</span>];</div><div class="line">	<span class="keyword">if</span> (checkSignature ()) &#123;</div><div class="line">		<span class="keyword">echo</span> $echoStr;</div><div class="line">		<span class="keyword">exit</span> ();</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//验证TOKEN算法</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkSignature</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span> (! defined ( <span class="string">"TOKEN"</span> )) &#123;</div><div class="line">		<span class="keyword">throw</span> <span class="keyword">new</span> <span class="keyword">Exception</span> ( <span class="string">'TOKEN is not defined!'</span> );</div><div class="line">	&#125;</div><div class="line">	$signature = $_GET [<span class="string">"signature"</span>];</div><div class="line">	$timestamp = $_GET [<span class="string">"timestamp"</span>];</div><div class="line">	$nonce = $_GET [<span class="string">"nonce"</span>];</div><div class="line">	$token = TOKEN;</div><div class="line">	$tmpArr = <span class="keyword">array</span> (</div><div class="line">			$token,</div><div class="line">			$timestamp,</div><div class="line">			$nonce</div><div class="line">	);</div><div class="line">	sort ( $tmpArr, SORT_STRING );</div><div class="line">	$tmpStr = implode ( $tmpArr );</div><div class="line">	$tmpStr = sha1 ( $tmpStr );</div><div class="line"></div><div class="line">	<span class="keyword">if</span> ($tmpStr == $signature) &#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">	&#125; <span class="keyword">else</span> &#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>验证方式，当收到<figure class="highlight plain"><figcaption><span>```时，调用验证 函数进行验证，否则当消息为推送消息时，调用处理.</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">```</div><div class="line">//如果接收到验证信息则调用valid()函数进行验证</div><div class="line">if (isset ( $_GET [&apos;echostr&apos;] )) &#123;</div><div class="line">	valid ();</div><div class="line">&#125; else &#123;</div><div class="line">        //如果接收到的是微信客户端的消息则实例化回复类将OPENID传递给回复类的responseMsg()方法.</div><div class="line">	@$Wechart = new Answer();</div><div class="line">	@$openid = $_GET [&apos;openid&apos;];</div><div class="line">	@$Wechart-&gt;responseMsg ( $openid );</div><div class="line">	&#125;</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;ol&gt;
&lt;li&gt;接入文件，建立为Wechat.php（当此文件在框架中使用时，单独建立为一个Controller即可）.&lt;br&gt;首先我们需要宏定义一个TOKEN变量与微信接入的TOKEN一致  &lt;figure class=&quot;highlight lasso&quot;&gt;&lt;table&gt;&lt;tr
    
    </summary>
    
    
      <category term="PHP" scheme="/PulsarTao.github.io/tags/PHP/"/>
    
      <category term="Wechat" scheme="/PulsarTao.github.io/tags/Wechat/"/>
    
  </entry>
  
  <entry>
    <title>Wechat PHP Dev NO.1</title>
    <link href="/PulsarTao.github.io/2017/01/11/Wechat-PHP-Dev-NO-1/"/>
    <id>/PulsarTao.github.io/2017/01/11/Wechat-PHP-Dev-NO-1/</id>
    <published>2017-01-11T06:56:06.000Z</published>
    <updated>2017-01-11T08:14:29.062Z</updated>
    
    <content type="html"><![CDATA[<p>首先，梳理一下微信公众号的整个工作流程  </p>
<ul>
<li>事件<br>事件就是用户对公众号发生一系列操作的时候触发的动作<br>微信的事件有下  <ol>
<li><a href="">]关注/取消关注事件</a></li>
<li><a href="">扫描带参数二维码事件</a></li>
<li><a href="">上报地理位置事件</a></li>
<li><a href="">自定义菜单事件</a></li>
<li><a href="">点击菜单拉取消息时的事件推送</a></li>
<li><a href="">点击菜单跳转链接时的事件推送</a></li>
</ol>
</li>
</ul>
<p>用户在关注与取消关注公众号时，微信会把这个事件推送到开发者填写的URL,即发送一个REQUEST到用户所填的URL地址.</p>
<p>微信服务器在五秒内收不到响应会断掉连接，并且重新发起请求，总共重试三次。假如服务器无法保证在五秒内处理并回复，可以直接回复空串，微信服务器不会对此作任何处理，并且不会发起重试。<br><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span>          <span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span>           <span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span></div><div class="line"><span class="comment">|用户事件|→MEssage→|腾讯微信服务器|→REQUEST→|你的微信服务器|</span></div><div class="line"><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span>          <span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span>           <span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span></div><div class="line">                                                 <span class="comment">↓</span></div><div class="line">                      <span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span>               <span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span></div><div class="line">                      <span class="comment">|用户|←</span>  <span class="comment">Message</span>    <span class="comment">←|腾讯微信服务器|</span></div><div class="line">                      <span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span>                <span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span></div></pre></td></tr></table></figure></p>
<h4 id="关注-取消关注事件"><a href="#关注-取消关注事件" class="headerlink" title="关注/取消关注事件"></a>关注/取消关注事件</h4><p>关注/取消关注事件发生时腾讯服务器会向你的URL的地址推送XML数据<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">xml</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">ToUserName</span>&gt;</span>&lt;![CDATA[toUser]]&gt;<span class="tag">&lt;/<span class="name">ToUserName</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">FromUserName</span>&gt;</span>&lt;![CDATA[FromUser]]&gt;<span class="tag">&lt;/<span class="name">FromUserName</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">CreateTime</span>&gt;</span>123456789<span class="tag">&lt;/<span class="name">CreateTime</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">MsgType</span>&gt;</span>&lt;![CDATA[event]]&gt;<span class="tag">&lt;/<span class="name">MsgType</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">Event</span>&gt;</span>&lt;![CDATA[subscribe]]&gt;<span class="tag">&lt;/<span class="name">Event</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">xml</span>&gt;</span></div></pre></td></tr></table></figure></p>
<table><br>  <tr><br>    <td><br>      参数<br>    </td><br>    <td><br>      描述<br>    </td><br>  </tr><br>  <tr><br>    <td><br>      ToUserName<br>    </td><br>    <td><br>      开发者微信号<br>    </td><br>  </tr><br>  <tr><br>    <td><br>      FromUserName<br>    </td><br>    <td><br>      发送方帐号（一个OpenID）<br>    </td><br>  </tr><br>  <tr><br>    <td><br>      CreateTime<br>    </td><br>    <td><br>      消息创建时间 （整型）(时间戳)<br>    </td><br>  </tr><br>  <tr><br>    <td><br>      MsgType<br>    </td><br>    <td><br>      消息类型，event<br>    </td><br>  </tr><br>  <tr><br>    <td><br>      Event<br>    </td><br>    <td><br>      事件类型，subscribe(订阅)、unsubscribe(取消订阅)<br>    </td><br>  </tr><br></table>

<h4 id="扫描带参数二维码事件"><a href="#扫描带参数二维码事件" class="headerlink" title="扫描带参数二维码事件"></a>扫描带参数二维码事件</h4><p>用户扫描带场景值二维码时，可能推送以下两种事件：</p>
<ul>
<li><p>如果用户还未关注公众号，则用户可以关注公众号，关注后微信会将带场景值关注事件推送给开发者。</p>
</li>
<li><p>如果用户已经关注公众号，则微信会将带场景值扫描事件推送给开发者。<br>REQUEST XML如下</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">xml</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">ToUserName</span>&gt;</span>&lt;![CDATA[toUser]]&gt;<span class="tag">&lt;/<span class="name">ToUserName</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">FromUserName</span>&gt;</span>&lt;![CDATA[FromUser]]&gt;<span class="tag">&lt;/<span class="name">FromUserName</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">CreateTime</span>&gt;</span>123456789<span class="tag">&lt;/<span class="name">CreateTime</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">MsgType</span>&gt;</span>&lt;![CDATA[event]]&gt;<span class="tag">&lt;/<span class="name">MsgType</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">Event</span>&gt;</span>&lt;![CDATA[subscribe]]&gt;<span class="tag">&lt;/<span class="name">Event</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">EventKey</span>&gt;</span>&lt;![CDATA[qrscene_123123]]&gt;<span class="tag">&lt;/<span class="name">EventKey</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">Ticket</span>&gt;</span>&lt;![CDATA[TICKET]]&gt;<span class="tag">&lt;/<span class="name">Ticket</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">xml</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<table><br>  <tr><br>    <th>参数</th><br>    <th>描述</th><br>  </tr><br>  <tr><br>    <td>ToUserName</td><br>    <td>开发者微信号</td><br>  </tr><br>  <tr><br>    <td>FromUserName</td><br>    <td>发送方帐号（一个OpenID）</td><br>  </tr><br>  <tr><br>    <td>CreateTime</td><br>    <td>消息创建时间 （整型）</td><br>  </tr><br>  <tr><br>    <td>MsgType</td><br>    <td>消息类型，event</td><br>  </tr><br>  <tr><br>    <td>Event</td><br>    <td>事件类型，subscribe</td><br>  </tr><br>  <tr><br>    <td>EventKey</td><br>    <td>事件KEY值，qrscene_为前缀，后面为二维码的参数值</td><br>  </tr><br>  <tr><br>    <td>Ticket</td><td>二维码的ticket，可用来换取二维码图片</td><br>  </tr><br></table>

<h4 id="用户已关注时的事件推送"><a href="#用户已关注时的事件推送" class="headerlink" title="用户已关注时的事件推送"></a>用户已关注时的事件推送</h4><p>此事件发生的时间为当用户关注此公众号时<br>REQUEST XML:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">xml</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">ToUserName</span>&gt;</span>&lt;![CDATA[toUser]]&gt;<span class="tag">&lt;/<span class="name">ToUserName</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">FromUserName</span>&gt;</span>&lt;![CDATA[FromUser]]&gt;<span class="tag">&lt;/<span class="name">FromUserName</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">CreateTime</span>&gt;</span>123456789<span class="tag">&lt;/<span class="name">CreateTime</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">MsgType</span>&gt;</span>&lt;![CDATA[event]]&gt;<span class="tag">&lt;/<span class="name">MsgType</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">Event</span>&gt;</span>&lt;![CDATA[SCAN]]&gt;<span class="tag">&lt;/<span class="name">Event</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">EventKey</span>&gt;</span>&lt;![CDATA[SCENE_VALUE]]&gt;<span class="tag">&lt;/<span class="name">EventKey</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">Ticket</span>&gt;</span>&lt;![CDATA[TICKET]]&gt;<span class="tag">&lt;/<span class="name">Ticket</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">xml</span>&gt;</span></div></pre></td></tr></table></figure></p>
<table><br>  <tr><br>    <th>参数</th><br>    <th>描述</th><br>  </tr><br>  <tr><br>    <td>ToUserName</td><br>    <td>开发者微信号</td><br>  </tr><br>  <tr><br>    <td>FromUserName</td><br>    <td>发送方帐号（一个OpenID）</td><br>  </tr><br>  <tr><br>    <td>CreateTime</td><br>    <td>消息创建时间 （整型）</td><br>  </tr><br>  <tr><br>    <td>MsgType</td><br>    <td>消息类型，event</td><br>  </tr><br>  <tr><br>    <td>Event</td><br>    <td>事件类型，SCAN</td><br>  </tr><br>  <tr><br>    <td>EventKey</td><br>    <td>事件KEY值，是一个32位无符号整数，即创建二维码时的二维码scene_id</td><br>  </tr><br>  <tr><br>    <td>Ticket</td><td>二维码的ticket，可用来换取二维码图片</td><br>  </tr><br></table>  

<h4 id="上报地理位置事件"><a href="#上报地理位置事件" class="headerlink" title="上报地理位置事件"></a>上报地理位置事件</h4><p>REQUEST XML<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">xml</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">ToUserName</span>&gt;</span>&lt;![CDATA[toUser]]&gt;<span class="tag">&lt;/<span class="name">ToUserName</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">FromUserName</span>&gt;</span>&lt;![CDATA[fromUser]]&gt;<span class="tag">&lt;/<span class="name">FromUserName</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">CreateTime</span>&gt;</span>123456789<span class="tag">&lt;/<span class="name">CreateTime</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">MsgType</span>&gt;</span>&lt;![CDATA[event]]&gt;<span class="tag">&lt;/<span class="name">MsgType</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">Event</span>&gt;</span>&lt;![CDATA[LOCATION]]&gt;<span class="tag">&lt;/<span class="name">Event</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">Latitude</span>&gt;</span>23.137466<span class="tag">&lt;/<span class="name">Latitude</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">Longitude</span>&gt;</span>113.352425<span class="tag">&lt;/<span class="name">Longitude</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">Precision</span>&gt;</span>119.385040<span class="tag">&lt;/<span class="name">Precision</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">xml</span>&gt;</span></div></pre></td></tr></table></figure></p>
<table><br>  <tr><br>    <th>参数</th><br>    <th>描述</th><br>  </tr><br>  <tr><br>    <td>ToUserName</td><br>    <td>开发者微信号</td><br>  </tr><br>  <tr><br>    <td>FromUserName</td><br>    <td>发送方帐号（一个OpenID）</td><br>  </tr><br>  <tr><br>    <td>CreateTime</td><br>    <td>消息创建时间 （整型）</td><br>  </tr><br>  <tr><br>    <td>MsgType</td><br>    <td>消息类型，event</td><br>  </tr><br>  <tr><br>    <td>Event</td><br>    <td>事件类型，LOCATION</td><br>  </tr><br>  <tr><br>    <td>Latitude</td><br>    <td>地理位置纬度</td><br>  </tr><br>  <tr><br>    <td>Longitude</td><br>    <td>地理位置经度</td><br>  </tr><br>  <tr><br>    <td>Precision</td><br>    <td>地理位置精度</td><br>  </tr><br></table>

<h4 id="自定义菜单事件"><a href="#自定义菜单事件" class="headerlink" title="自定义菜单事件"></a>自定义菜单事件</h4><p>用户点击自定义菜单后，微信会把点击事件推送给开发者，请注意，点击菜单弹出子菜单，不会产生上报。<br>此事件的发生时间为打开公众号时<br>REQUEST XML<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">xml</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">ToUserName</span>&gt;</span>&lt;![CDATA[toUser]]&gt;<span class="tag">&lt;/<span class="name">ToUserName</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">FromUserName</span>&gt;</span>&lt;![CDATA[FromUser]]&gt;<span class="tag">&lt;/<span class="name">FromUserName</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">CreateTime</span>&gt;</span>123456789<span class="tag">&lt;/<span class="name">CreateTime</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">MsgType</span>&gt;</span>&lt;![CDATA[event]]&gt;<span class="tag">&lt;/<span class="name">MsgType</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">Event</span>&gt;</span>&lt;![CDATA[CLICK]]&gt;<span class="tag">&lt;/<span class="name">Event</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">EventKey</span>&gt;</span>&lt;![CDATA[EVENTKEY]]&gt;<span class="tag">&lt;/<span class="name">EventKey</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">xml</span>&gt;</span></div></pre></td></tr></table></figure></p>
<table><br>  <tr><br>    <th>参数</th><br>    <th>描述</th><br>  </tr><br>  <tr><br>    <td>ToUserName</td><br>    <td>开发者微信号</td><br>  </tr><br>  <tr><br>    <td>FromUserName</td><br>    <td>发送方帐号（一个OpenID）</td><br>  </tr><br>  <tr><br>    <td>CreateTime</td><br>    <td>消息创建时间 （整型）</td><br>  </tr><br>  <tr><br>    <td>MsgType</td><br>    <td>消息类型，event</td><br>  </tr><br>  <tr><br>    <td>Event</td><br>    <td>事件类型，CLICK</td><br>  </tr><br>  <tr><br>    <td>EventKey</td><br>    <td>事件KEY值，与自定义菜单接口中KEY值对应</td><br>  </tr><br></table>

<h4 id="点击菜单跳转链接时的事件推送"><a href="#点击菜单跳转链接时的事件推送" class="headerlink" title="点击菜单跳转链接时的事件推送"></a>点击菜单跳转链接时的事件推送</h4><p>此事件发生的时间为用户点击自定义菜单时<br>REQUEST XML<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">xml</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">ToUserName</span>&gt;</span>&lt;![CDATA[toUser]]&gt;<span class="tag">&lt;/<span class="name">ToUserName</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">FromUserName</span>&gt;</span>&lt;![CDATA[FromUser]]&gt;<span class="tag">&lt;/<span class="name">FromUserName</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">CreateTime</span>&gt;</span>123456789<span class="tag">&lt;/<span class="name">CreateTime</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">MsgType</span>&gt;</span>&lt;![CDATA[event]]&gt;<span class="tag">&lt;/<span class="name">MsgType</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">Event</span>&gt;</span>&lt;![CDATA[VIEW]]&gt;<span class="tag">&lt;/<span class="name">Event</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">EventKey</span>&gt;</span>&lt;![CDATA[www.qq.com]]&gt;<span class="tag">&lt;/<span class="name">EventKey</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">xml</span>&gt;</span></div></pre></td></tr></table></figure></p>
<table><br>  <tr><br>    <th>参数</th><br>    <th>描述</th><br>  </tr><br>  <tr><br>    <td>ToUserName</td><br>    <td>开发者微信号</td><br>  </tr><br>  <tr><br>    <td>FromUserName</td><br>    <td>发送方帐号（一个OpenID）</td><br>  </tr><br>  <tr><br>    <td>CreateTime</td><br>    <td>消息创建时间 （整型）</td><br>  </tr><br>  <tr><br>    <td>MsgType</td><br>    <td>消息类型，event</td><br>  </tr><br>  <tr><br>    <td>Event</td><br>    <td>事件类型，VIEW</td><br>  </tr><br>  <tr><br>    <td>EventKey</td><br>    <td>事件KEY值，设置的跳转URL</td><br>  </tr><br></table>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;首先，梳理一下微信公众号的整个工作流程  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;事件&lt;br&gt;事件就是用户对公众号发生一系列操作的时候触发的动作&lt;br&gt;微信的事件有下  &lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;&quot;&gt;]关注/取消关注事件&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;&quot;&gt;扫描带
    
    </summary>
    
    
      <category term="PHP" scheme="/PulsarTao.github.io/tags/PHP/"/>
    
      <category term="Wechat" scheme="/PulsarTao.github.io/tags/Wechat/"/>
    
      <category term="Overview" scheme="/PulsarTao.github.io/tags/Overview/"/>
    
  </entry>
  
  <entry>
    <title>Time method C#</title>
    <link href="/PulsarTao.github.io/2017/01/09/Time-method-C/"/>
    <id>/PulsarTao.github.io/2017/01/09/Time-method-C/</id>
    <published>2017-01-09T05:24:51.000Z</published>
    <updated>2017-01-11T08:14:39.145Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight sqf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line">DateTime dt = DateTime.Now;</div><div class="line">Label1.<span class="built_in">Text</span> = dt.<span class="built_in">ToString</span>();<span class="comment">//2005-11-5 13:21:25</span></div><div class="line">Label2.<span class="built_in">Text</span> = dt.ToFileTime().<span class="built_in">ToString</span>();<span class="comment">//127756416859912816</span></div><div class="line">Label3.<span class="built_in">Text</span> = dt.ToFileTimeUtc().<span class="built_in">ToString</span>();<span class="comment">//127756704859912816</span></div><div class="line">Label4.<span class="built_in">Text</span> = dt.ToLocalTime().<span class="built_in">ToString</span>();<span class="comment">//2005-11-5 21:21:25</span></div><div class="line">Label5.<span class="built_in">Text</span> = dt.ToLongDateString().<span class="built_in">ToString</span>();<span class="comment">//2005年11月5日</span></div><div class="line">Label6.<span class="built_in">Text</span> = dt.ToLongTimeString().<span class="built_in">ToString</span>();<span class="comment">//13:21:25</span></div><div class="line">Label7.<span class="built_in">Text</span> = dt.ToOADate().<span class="built_in">ToString</span>();<span class="comment">//38661.5565508218</span></div><div class="line">Label8.<span class="built_in">Text</span> = dt.ToShortDateString().<span class="built_in">ToString</span>();<span class="comment">//2005-11-5</span></div><div class="line">Label9.<span class="built_in">Text</span> = dt.ToShortTimeString().<span class="built_in">ToString</span>();<span class="comment">//13:21</span></div><div class="line">Label10.<span class="built_in">Text</span> = dt.ToUniversalTime().<span class="built_in">ToString</span>();<span class="comment">//2005-11-5 5:21:25</span></div><div class="line"><span class="comment">//?2005-11-5 13:30:28.4412864</span></div><div class="line">Label1.<span class="built_in">Text</span> = dt.Year.<span class="built_in">ToString</span>();<span class="comment">//2005</span></div><div class="line">Label2.<span class="built_in">Text</span> = dt.<span class="built_in">Date</span>.<span class="built_in">ToString</span>();<span class="comment">//2005-11-5 0:00:00</span></div><div class="line">Label3.<span class="built_in">Text</span> = dt.DayOfWeek.<span class="built_in">ToString</span>();<span class="comment">//Saturday</span></div><div class="line">Label4.<span class="built_in">Text</span> = dt.DayOfYear.<span class="built_in">ToString</span>();<span class="comment">//309</span></div><div class="line">Label5.<span class="built_in">Text</span> = dt.Hour.<span class="built_in">ToString</span>();<span class="comment">//13</span></div><div class="line">Label6.<span class="built_in">Text</span> = dt.Millisecond.<span class="built_in">ToString</span>();<span class="comment">//441</span></div><div class="line">Label7.<span class="built_in">Text</span> = dt.Minute.<span class="built_in">ToString</span>();<span class="comment">//30</span></div><div class="line">Label8.<span class="built_in">Text</span> = dt.Month.<span class="built_in">ToString</span>();<span class="comment">//11</span></div><div class="line">Label9.<span class="built_in">Text</span> = dt.Second.<span class="built_in">ToString</span>();<span class="comment">//28</span></div><div class="line">Label10.<span class="built_in">Text</span> = dt.Ticks.<span class="built_in">ToString</span>();<span class="comment">//632667942284412864</span></div><div class="line">Label11.<span class="built_in">Text</span> = dt.TimeOfDay.<span class="built_in">ToString</span>();<span class="comment">//13:30:28.4412864</span></div><div class="line">Label1.<span class="built_in">Text</span> = dt.<span class="built_in">ToString</span>();<span class="comment">//2005-11-5 13:47:04</span></div><div class="line">Label2.<span class="built_in">Text</span> = dt.AddYears(<span class="number">1</span>).<span class="built_in">ToString</span>();<span class="comment">//2006-11-5 13:47:04</span></div><div class="line">Label3.<span class="built_in">Text</span> = dt.AddDays(<span class="number">1.1</span>).<span class="built_in">ToString</span>();<span class="comment">//2005-11-6 16:11:04</span></div><div class="line">Label4.<span class="built_in">Text</span> = dt.AddHours(<span class="number">1.1</span>).<span class="built_in">ToString</span>();<span class="comment">//2005-11-5 14:53:04</span></div><div class="line">Label5.<span class="built_in">Text</span> = dt.AddMilliseconds(<span class="number">1.1</span>).<span class="built_in">ToString</span>();<span class="comment">//2005-11-5 13:47:04</span></div><div class="line">Label6.<span class="built_in">Text</span> = dt.AddMonths(<span class="number">1</span>).<span class="built_in">ToString</span>();<span class="comment">//2005-12-5 13:47:04</span></div><div class="line">Label7.<span class="built_in">Text</span> = dt.AddSeconds(<span class="number">1.1</span>).<span class="built_in">ToString</span>();<span class="comment">//2005-11-5 13:47:05</span></div><div class="line">Label8.<span class="built_in">Text</span> = dt.AddMinutes(<span class="number">1.1</span>).<span class="built_in">ToString</span>();<span class="comment">//2005-11-5 13:48:10</span></div><div class="line">Label9.<span class="built_in">Text</span> = dt.AddTicks(<span class="number">1000</span>).<span class="built_in">ToString</span>();<span class="comment">//2005-11-5 13:47:04</span></div><div class="line">Label10.<span class="built_in">Text</span> = dt.CompareTo(dt).<span class="built_in">ToString</span>();<span class="comment">//0</span></div><div class="line"><span class="comment">//Label11.Text = dt.Add(?).ToString();//问号为一个时间段</span></div><div class="line">Label1.<span class="built_in">Text</span> = dt.Equals(<span class="string">"2005-11-6 16:11:04"</span>).<span class="built_in">ToString</span>();<span class="comment">//False</span></div><div class="line">Label2.<span class="built_in">Text</span> = dt.Equals(dt).<span class="built_in">ToString</span>();<span class="comment">//True</span></div><div class="line">Label3.<span class="built_in">Text</span> = dt.GetHashCode().<span class="built_in">ToString</span>();<span class="comment">//1474088234</span></div><div class="line">Label4.<span class="built_in">Text</span> = dt.GetType().<span class="built_in">ToString</span>();<span class="comment">//System.DateTime</span></div><div class="line">Label5.<span class="built_in">Text</span> = dt.GetTypeCode().<span class="built_in">ToString</span>();<span class="comment">//DateTime</span></div><div class="line">Label1.<span class="built_in">Text</span> = dt.GetDateTimeFormats(<span class="string">'s'</span>)[<span class="number">0</span>].<span class="built_in">ToString</span>();<span class="comment">//2005-11-05T14:06:25</span></div><div class="line">Label2.<span class="built_in">Text</span> = dt.GetDateTimeFormats(<span class="string">'t'</span>)[<span class="number">0</span>].<span class="built_in">ToString</span>();<span class="comment">//14:06</span></div><div class="line">Label3.<span class="built_in">Text</span> = dt.GetDateTimeFormats(<span class="string">'y'</span>)[<span class="number">0</span>].<span class="built_in">ToString</span>();<span class="comment">//2005年11月</span></div><div class="line">Label4.<span class="built_in">Text</span> = dt.GetDateTimeFormats(<span class="string">'D'</span>)[<span class="number">0</span>].<span class="built_in">ToString</span>();<span class="comment">//2005年11月5日</span></div><div class="line">Label5.<span class="built_in">Text</span> = dt.GetDateTimeFormats(<span class="string">'D'</span>)[<span class="number">1</span>].<span class="built_in">ToString</span>();<span class="comment">//2005 11 05</span></div><div class="line">Label6.<span class="built_in">Text</span> = dt.GetDateTimeFormats(<span class="string">'D'</span>)[<span class="number">2</span>].<span class="built_in">ToString</span>();<span class="comment">//星期六 2005 11 05</span></div><div class="line">Label7.<span class="built_in">Text</span> = dt.GetDateTimeFormats(<span class="string">'D'</span>)[<span class="number">3</span>].<span class="built_in">ToString</span>();<span class="comment">//星期六 2005年11月5日</span></div><div class="line">Label8.<span class="built_in">Text</span> = dt.GetDateTimeFormats(<span class="string">'M'</span>)[<span class="number">0</span>].<span class="built_in">ToString</span>();<span class="comment">//11月5日</span></div><div class="line">Label9.<span class="built_in">Text</span> = dt.GetDateTimeFormats(<span class="string">'f'</span>)[<span class="number">0</span>].<span class="built_in">ToString</span>();<span class="comment">//2005年11月5日 14:06</span></div><div class="line">Label10.<span class="built_in">Text</span> = dt.GetDateTimeFormats(<span class="string">'g'</span>)[<span class="number">0</span>].<span class="built_in">ToString</span>();<span class="comment">//2005-11-5 14:06</span></div><div class="line">Label11.<span class="built_in">Text</span> = dt.GetDateTimeFormats(<span class="string">'r'</span>)[<span class="number">0</span>].<span class="built_in">ToString</span>();<span class="comment">//Sat, 05 Nov 2005 14:06:25 GMT</span></div><div class="line">Label1.<span class="built_in">Text</span> =? string.<span class="built_in">Format</span>(<span class="string">"&#123;0:d&#125;"</span>,dt);<span class="comment">//2005-11-5</span></div><div class="line">Label2.<span class="built_in">Text</span> =? string.<span class="built_in">Format</span>(<span class="string">"&#123;0:D&#125;"</span>,dt);<span class="comment">//2005年11月5日</span></div><div class="line">Label3.<span class="built_in">Text</span> =? string.<span class="built_in">Format</span>(<span class="string">"&#123;0:f&#125;"</span>,dt);<span class="comment">//2005年11月5日 14:23</span></div><div class="line">Label4.<span class="built_in">Text</span> =? string.<span class="built_in">Format</span>(<span class="string">"&#123;0:F&#125;"</span>,dt);<span class="comment">//2005年11月5日 14:23:23</span></div><div class="line">Label5.<span class="built_in">Text</span> =? string.<span class="built_in">Format</span>(<span class="string">"&#123;0:g&#125;"</span>,dt);<span class="comment">//2005-11-5 14:23</span></div><div class="line">Label6.<span class="built_in">Text</span> =? string.<span class="built_in">Format</span>(<span class="string">"&#123;0:G&#125;"</span>,dt);<span class="comment">//2005-11-5 14:23:23</span></div><div class="line">Label7.<span class="built_in">Text</span> =? string.<span class="built_in">Format</span>(<span class="string">"&#123;0:M&#125;"</span>,dt);<span class="comment">//11月5日</span></div><div class="line">Label8.<span class="built_in">Text</span> =? string.<span class="built_in">Format</span>(<span class="string">"&#123;0:R&#125;"</span>,dt);<span class="comment">//Sat, 05 Nov 2005 14:23:23 GMT</span></div><div class="line">Label9.<span class="built_in">Text</span> =? string.<span class="built_in">Format</span>(<span class="string">"&#123;0:s&#125;"</span>,dt);<span class="comment">//2005-11-05T14:23:23</span></div><div class="line">Label10.<span class="built_in">Text</span> = string.<span class="built_in">Format</span>(<span class="string">"&#123;0:t&#125;"</span>,dt);<span class="comment">//14:23</span></div><div class="line">Label11.<span class="built_in">Text</span> = string.<span class="built_in">Format</span>(<span class="string">"&#123;0:T&#125;"</span>,dt);<span class="comment">//14:23:23</span></div><div class="line">Label12.<span class="built_in">Text</span> = string.<span class="built_in">Format</span>(<span class="string">"&#123;0:u&#125;"</span>,dt);<span class="comment">//2005-11-05 14:23:23Z</span></div><div class="line">Label13.<span class="built_in">Text</span> = string.<span class="built_in">Format</span>(<span class="string">"&#123;0:U&#125;"</span>,dt);<span class="comment">//2005年11月5日 6:23:23</span></div><div class="line">Label14.<span class="built_in">Text</span> = string.<span class="built_in">Format</span>(<span class="string">"&#123;0:Y&#125;"</span>,dt);<span class="comment">//2005年11月</span></div><div class="line">Label15.<span class="built_in">Text</span> = string.<span class="built_in">Format</span>(<span class="string">"&#123;0&#125;"</span>,dt);<span class="comment">//2005-11-5 14:23:23?</span></div><div class="line">Label16.<span class="built_in">Text</span> = string.<span class="built_in">Format</span>(<span class="string">"&#123;0:yyyyMMddHHmmssffff&#125;"</span>,dt);</div><div class="line"><span class="comment">//yyyymm等可以设置,比如Label16.Text = string.Format("&#123;0:yyyyMMdd&#125;",dt);</span></div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;figure class=&quot;highlight sqf&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;
    
    </summary>
    
    
      <category term="C#" scheme="/PulsarTao.github.io/tags/C/"/>
    
      <category term="Tim" scheme="/PulsarTao.github.io/tags/Tim/"/>
    
  </entry>
  
  <entry>
    <title>How to get Window size info</title>
    <link href="/PulsarTao.github.io/2017/01/09/How-to-get-Window-size-info/"/>
    <id>/PulsarTao.github.io/2017/01/09/How-to-get-Window-size-info/</id>
    <published>2017-01-09T05:21:59.000Z</published>
    <updated>2017-01-11T08:14:47.752Z</updated>
    
    <content type="html"><![CDATA[<p>JavaScript代码<br><figure class="highlight abnf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">function getInfo()</div><div class="line">&#123;</div><div class="line">var s = <span class="string">""</span><span class="comment">;</span></div><div class="line"><span class="attribute">s</span> = <span class="string">" 网页可见区域宽："</span> document.body.clientWidth<span class="comment">;</span></div><div class="line"><span class="attribute">s</span> = <span class="string">" 网页可见区域高："</span> document.body.clientHeight<span class="comment">;</span></div><div class="line"><span class="attribute">s</span> = <span class="string">" 网页可见区域宽："</span> document.body.offsetWidth <span class="string">" (包括边线和滚动条的宽)"</span><span class="comment">;</span></div><div class="line"><span class="attribute">s</span> = <span class="string">" 网页可见区域高："</span> document.body.offsetHeight <span class="string">" (包括边线的宽)"</span><span class="comment">;</span></div><div class="line"><span class="attribute">s</span> = <span class="string">" 网页正文全文宽："</span> document.body.scrollWidth<span class="comment">;</span></div><div class="line"><span class="attribute">s</span> = <span class="string">" 网页正文全文高："</span> document.body.scrollHeight<span class="comment">;</span></div><div class="line"><span class="attribute">s</span> = <span class="string">" 网页被卷去的高(ff)："</span> document.body.scrollTop<span class="comment">;</span></div><div class="line"><span class="attribute">s</span> = <span class="string">" 网页被卷去的高(ie)："</span> document.documentElement.scrollTop<span class="comment">;</span></div><div class="line"><span class="attribute">s</span> = <span class="string">" 网页被卷去的左："</span> document.body.scrollLeft<span class="comment">;</span></div><div class="line"><span class="attribute">s</span> = <span class="string">" 网页正文部分上："</span> window.screenTop<span class="comment">;</span></div><div class="line"><span class="attribute">s</span> = <span class="string">" 网页正文部分左："</span> window.screenLeft<span class="comment">;</span></div><div class="line"><span class="attribute">s</span> = <span class="string">" 屏幕分辨率的高："</span> window.screen.height<span class="comment">;</span></div><div class="line"><span class="attribute">s</span> = <span class="string">" 屏幕分辨率的宽："</span> window.screen.width<span class="comment">;</span></div><div class="line"><span class="attribute">s</span> = <span class="string">" 屏幕可用工作区高度："</span> window.screen.availHeight<span class="comment">;</span></div><div class="line"><span class="attribute">s</span> = <span class="string">" 屏幕可用工作区宽度："</span> window.screen.availWidth<span class="comment">;</span></div><div class="line"></div><div class="line"><span class="attribute">s</span> = <span class="string">" 你的屏幕设置是 "</span> window.screen.colorDepth <span class="string">" 位彩色"</span><span class="comment">;</span></div><div class="line"><span class="attribute">s</span> = <span class="string">" 你的屏幕设置 "</span> window.screen.deviceXDPI <span class="string">" 像素/英寸"</span><span class="comment">;</span></div><div class="line">//alert (s)<span class="comment">;</span></div><div class="line">&#125;</div><div class="line">getInfo()<span class="comment">;</span></div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure></p>
<p>在我本地测试当中：<br>在IE、FireFox、Opera下都可以使用<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">document<span class="selector-class">.body</span><span class="selector-class">.clientWidth</span></div><div class="line">document<span class="selector-class">.body</span><span class="selector-class">.clientHeight</span></div></pre></td></tr></table></figure></p>
<p>即可获得，很简单，很方便。<br>而在公司项目当中：</p>
<p>Opera仍然使用<br>document.body.clientWidth<br>document.body.clientHeight  </p>
<p>可是IE和FireFox则使用<br>document.documentElement.clientWidth<br>document.documentElement.clientHeight  </p>
<p>原来是W3C的标准在作怪啊<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;</span></div></pre></td></tr></table></figure></p>
<p>如果在页面中添加这行标记的话 在IE中：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">document<span class="selector-class">.body</span><span class="selector-class">.clientWidth</span> ==&gt; BODY对象宽度  </div><div class="line">document<span class="selector-class">.body</span><span class="selector-class">.clientHeight</span> ==&gt; BODY对象高度  </div><div class="line">document<span class="selector-class">.documentElement</span><span class="selector-class">.clientWidth</span> ==&gt; 可见区域宽度  </div><div class="line">document<span class="selector-class">.documentElement</span><span class="selector-class">.clientHeight</span> ==&gt; 可见区域高度</div></pre></td></tr></table></figure></p>
<p>在FireFox中：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">document<span class="selector-class">.body</span><span class="selector-class">.clientWidth</span> ==&gt; BODY对象宽度</div><div class="line">document<span class="selector-class">.body</span><span class="selector-class">.clientHeight</span> ==&gt; BODY对象高度</div><div class="line">document<span class="selector-class">.documentElement</span><span class="selector-class">.clientWidth</span> ==&gt; 可见区域宽度</div><div class="line">document<span class="selector-class">.documentElement</span><span class="selector-class">.clientHeight</span> ==&gt; 可见区域高度</div></pre></td></tr></table></figure></p>
<p>在Opera中：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">document<span class="selector-class">.body</span><span class="selector-class">.clientWidth</span> ==&gt; 可见区域宽度</div><div class="line">document<span class="selector-class">.body</span><span class="selector-class">.clientHeight</span> ==&gt; 可见区域高度</div><div class="line">document<span class="selector-class">.documentElement</span><span class="selector-class">.clientWidth</span> ==&gt; 页面对象宽度（即BODY对象宽度加上Margin宽）</div><div class="line">document<span class="selector-class">.documentElement</span><span class="selector-class">.clientHeight</span> ==&gt; 页面对象高度（即BODY对象高度加上Margin高）</div></pre></td></tr></table></figure></p>
<p>而如果没有定义W3C的标准，则   </p>
<p>IE为：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">document<span class="selector-class">.documentElement</span><span class="selector-class">.clientWidth</span> ==&gt; <span class="number">0</span></div><div class="line">document<span class="selector-class">.documentElement</span><span class="selector-class">.clientHeight</span> ==&gt; <span class="number">0</span></div></pre></td></tr></table></figure></p>
<p>FireFox为：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">document<span class="selector-class">.documentElement</span><span class="selector-class">.clientWidth</span> ==&gt; 页面对象宽度（即BODY对象宽度加上Margin宽）document<span class="selector-class">.documentElement</span><span class="selector-class">.clientHeight</span> ==&gt; 页面对象高度（即BODY对象高度加上Margin高）</div></pre></td></tr></table></figure></p>
<p>Opera为：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">document<span class="selector-class">.documentElement</span><span class="selector-class">.clientWidth</span> ==&gt; 页面对象宽度（即BODY对象宽度加上Margin宽）document<span class="selector-class">.documentElement</span><span class="selector-class">.clientHeight</span> ==&gt; 页面对象高度（即BODY对象高度加上Margin高）</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;JavaScript代码&lt;br&gt;&lt;figure class=&quot;highlight abnf&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div 
    
    </summary>
    
    
      <category term="JavaScript" scheme="/PulsarTao.github.io/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>My first blog markdown</title>
    <link href="/PulsarTao.github.io/2017/01/08/My-first-blog-markdown/"/>
    <id>/PulsarTao.github.io/2017/01/08/My-first-blog-markdown/</id>
    <published>2017-01-07T18:02:34.000Z</published>
    <updated>2017-01-07T18:02:34.118Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
</feed>
